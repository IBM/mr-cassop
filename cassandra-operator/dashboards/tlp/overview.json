{
  "__requires": [
    {
      "type": "panel",
      "id": "bargauge",
      "name": "Bar Gauge",
      "version": ""
    },
    {
      "type": "grafana",
      "id": "grafana",
      "name": "Grafana",
      "version": "6.2.5"
    },
    {
      "type": "panel",
      "id": "graph",
      "name": "Graph",
      "version": ""
    },
    {
      "type": "datasource",
      "id": "prometheus",
      "name": "Prometheus",
      "version": "1.0.0"
    },
    {
      "type": "panel",
      "id": "table",
      "name": "Table",
      "version": ""
    }
  ],
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": "-- Grafana --",
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "editable": false,
  "gnetId": null,
  "graphTooltip": 0,
  "id": null,
  "iteration": 1567112610177,
  "links": [
    {
      "asDropdown": true,
      "icon": "external link",
      "includeVars": false,
      "keepTime": true,
      "tags": [
        "tlp",
        "cassandra"
      ],
      "title": "Other C* Dashboards",
      "type": "dashboards"
    }
  ],
  "panels": [
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 39,
      "panels": [],
      "repeat": null,
      "title": "Node Alive Status",
      "type": "row"
    },
    {
      "columns": [
        {
          "text": "Max",
          "value": "max"
        }
      ],
      "datasource": "$datasource",
      "description": "Gossip messages are exchanged with other nodes as long as the node is up and able to communicate properly through port 7000 (or 7001 secured).\n\n##### Values\n\nA value of `1` is displayed if the number of processed Gossip messages has changed recently.\n\nA value of `0` is displayed if the number of processed gossip messages has not changed recently. If a value of `0` appears, this implies the node may be offline or not communicating properly with other nodes in the cluster.\n\n##### Required Actions\n\nIf Gossip messages are not being processed:\n\n* No incoming Gossip messages are being sent from the other nodes to this Cassandra node.",
      "editable": true,
      "error": false,
      "fontSize": "100%",
      "gridPos": {
        "h": 5,
        "w": 6,
        "x": 6,
        "y": 1
      },
      "hideTimeOverride": true,
      "id": 38,
      "links": [],
      "options": {},
      "pageSize": null,
      "scroll": true,
      "showHeader": true,
      "sort": {
        "col": 1,
        "desc": false
      },
      "styles": [
        {
          "alias": "Node is up?",
          "colorMode": "row",
          "colors": [
            "rgba(245, 54, 54, 0.9)",
            "rgba(237, 129, 40, 0.89)",
            "rgba(50, 172, 45, 0.97)"
          ],
          "dateFormat": "YYYY-MM-DD HH:mm:ss",
          "decimals": 2,
          "mappingType": 1,
          "pattern": "Max",
          "thresholds": [
            "0.1",
            "1"
          ],
          "type": "number",
          "unit": "short"
        }
      ],
      "targets": [
        {
          "expr": "rate(org_apache_cassandra_metrics_ThreadPools{namespace=\"$ns\", datacenter=\"$dc\", status_pool=\"CompletedTasks\", thread_type=\"internal\", thread_pool=\"GossipStage\"}[2m])",
          "format": "time_series",
          "intervalFactor": 1,
          "legendFormat": "{{pod}}",
          "refId": "A",
          "target": "aliasByNode(changed(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ThreadPools.internal.GossipStage.CompletedTasks.value), 3)",
          "textEditor": false
        }
      ],
      "timeFrom": "2m",
      "title": "Node status (Gossip)",
      "transform": "timeseries_aggregations",
      "transparent": true,
      "type": "table"
    },
    {
      "columns": [
        {
          "text": "Max",
          "value": "max"
        }
      ],
      "datasource": "$datasource",
      "description": "Native requests will be processed if CQL statements are being processed.\n\n##### Values\n\nA value of `1` is displayed if the number of processed Native requests has changed recently.\n\nA value of `0` is displayed if the number of processed Native requests has not changed recently. If a value of `0` appears, this implies the node may be offline or not currently processing any CQL requests.\n\n##### Required Actions\n\nIf Native requests are not being processed:\n\n* No incoming CQL requests are being sent from the application to the Cassandra node.\n* An application update may have removed nodes from the `RoundRobinPolicy`.\n* Only Thrift-based requests are being processed.",
      "editable": true,
      "error": false,
      "fontSize": "100%",
      "gridPos": {
        "h": 5,
        "w": 6,
        "x": 12,
        "y": 1
      },
      "hideTimeOverride": true,
      "id": 9,
      "links": [],
      "options": {},
      "pageSize": null,
      "scroll": true,
      "showHeader": true,
      "sort": {
        "col": 0,
        "desc": false
      },
      "styles": [
        {
          "alias": "Clients active?",
          "colorMode": "row",
          "colors": [
            "rgba(245, 54, 54, 0.9)",
            "rgba(46, 172, 17, 0.89)",
            "rgba(33, 179, 23, 0.97)"
          ],
          "decimals": 2,
          "pattern": "Max",
          "thresholds": [
            "0.01",
            "1"
          ],
          "type": "number",
          "unit": "short"
        }
      ],
      "targets": [
        {
          "expr": "rate(org_apache_cassandra_metrics_ThreadPools{namespace=\"$ns\", datacenter=\"$dc\", status_pool=\"CompletedTasks\", thread_type=\"request\", thread_pool=\"RequestResponseStage\"}[2m])",
          "format": "time_series",
          "intervalFactor": 1,
          "legendFormat": "{{pod}}",
          "refId": "A",
          "target": "aliasByNode(changed(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ThreadPools.request.RequestResponseStage.CompletedTasks.value), 3)",
          "textEditor": false
        }
      ],
      "timeFrom": "2m",
      "title": "Node status (Native)",
      "transform": "timeseries_aggregations",
      "transparent": true,
      "type": "table"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Gossip requests are a natural mechanism within Cassandra for calculating the cluster topography  in a decentralized manner.\n\n##### Values\n\nA value of `1` is displayed if the number of processed Gossip requests has changed recently.\n\nA value of `0` is displayed if the number of processed Gossip requests has not changed recently. If a value of `0` appears, this implies the node may be offline or unable to report its status to the Gossip state.\n\n##### False Positives\n\nA temporary lapse from `1` to `0` may indicate heavier than usual load.\n\nConsider tuning the `phi_convict_threshold` setting to `12` if running in AWS and experiencing issues with flapping nodes that momentarily display the `DN`, or `Downed/Normal`, status via `nodetool status`.",
      "fill": 0,
      "gridPos": {
        "h": 5,
        "w": 6,
        "x": 18,
        "y": 1
      },
      "hideTimeOverride": true,
      "id": 19,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "rightSide": true,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": false,
      "linewidth": 1,
      "links": [],
      "nullPointMode": "null",
      "options": {},
      "percentage": false,
      "pointradius": 2,
      "points": true,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "org_apache_cassandra_metrics_ThreadPools{namespace=\"$ns\", datacenter=\"$dc\", status_pool=\"CompletedTasks\", thread_type=\"internal\", thread_pool=\"GossipStage\"}",
          "format": "time_series",
          "intervalFactor": 1,
          "legendFormat": "",
          "refId": "A",
          "target": "aliasByNode(changed(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ThreadPools.internal.GossipStage.CompletedTasks.value), 3)",
          "textEditor": false
        }
      ],
      "thresholds": [
        {
          "colorMode": "critical",
          "fill": true,
          "line": true,
          "op": "lt",
          "value": 1,
          "yaxis": "left"
        }
      ],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": "120s",
      "title": "Alerting on Gossip",
      "tooltip": {
        "shared": false,
        "sort": 1,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "short",
          "label": "0 is offline, 1 is online",
          "logBase": 1,
          "max": "1",
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 6
      },
      "id": 40,
      "panels": [],
      "repeat": "dc",
      "title": "Operational Latencies",
      "type": "row"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Monitor `p75` latencies to get a view of the cluster's typical operating latencies.\n\nMonitor the `p95` and `p99` latencies for anomalies to get an early indicator for potential issues.\n\n##### Required Actions\n\nIf `p95` read latency metrics spike, investigate:\n\n* Disk contention.\n* Frequent garbage collections.\n* Prolonged garbage collection times.\n* Inefficient read patterns.\n* Back pressure.",
      "editable": true,
      "error": false,
      "fill": 0,
      "grid": {},
      "gridPos": {
        "h": 4,
        "w": 8,
        "x": 0,
        "y": 7
      },
      "id": 1,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "rightSide": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 2,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "avg(org_apache_cassandra_metrics_ClientRequest_Latency{namespace=\"$ns\", datacenter=\"$dc\", scope=\"Read\", unit=\"75thPercentile\"}) by (namespace, datacenter, scope)",
          "format": "time_series",
          "legendFormat": "{{namespace}}.{{datacenter}}.{{scope}}.Latency.p75",
          "refId": "A",
          "target": "aliasByNode(averageSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ClientRequest.Read.Latency.75percentile, 3), 2, 8, 9, 10)",
          "textEditor": false
        },
        {
          "expr": "avg(org_apache_cassandra_metrics_ClientRequest_Latency{namespace=\"$ns\", datacenter=\"$dc\", scope=\"Read\", unit=\"95thPercentile\"}) by (namespace, datacenter, scope)",
          "format": "time_series",
          "hide": false,
          "legendFormat": "{{namespace}}.{{datacenter}}.{{scope}}.Latency.p95",
          "refId": "B",
          "target": "aliasByNode(averageSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ClientRequest.Read.Latency.95percentile, 3), 2, 8, 9, 10)",
          "textEditor": false
        },
        {
          "expr": "avg(org_apache_cassandra_metrics_ClientRequest_Latency{namespace=\"$ns\", datacenter=\"$dc\", scope=\"Read\", unit=\"99thPercentile\"}) by (namespace, datacenter, scope)",
          "format": "time_series",
          "hide": false,
          "legendFormat": "{{namespace}}.{{datacenter}}.{{scope}}.Latency.p99",
          "refId": "C",
          "target": "aliasByNode(averageSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ClientRequest.Read.Latency.99percentile, 3), 2, 8, 9, 10)",
          "textEditor": false
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Read latencies (by data center)",
      "tooltip": {
        "msResolution": false,
        "shared": false,
        "sort": 2,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "µs",
          "label": "Read latency",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Monitor `p75` latencies to get a view of the cluster's typical operating latencies.\n\nMonitor the `p95` and `p99` latencies for anomalies to get an early indicator for potential issues.\n\n##### Required Actions\n\nIf `p95` write latency metrics spike, investigate:\n\n* Disk contention.\n* Counter usage.\n* Lightweight transaction usage.\n* Frequent garbage collections.\n* Prolonged garbage collection times.\n* Back pressure.",
      "editable": true,
      "error": false,
      "fill": 0,
      "grid": {},
      "gridPos": {
        "h": 4,
        "w": 8,
        "x": 8,
        "y": 7
      },
      "id": 2,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "rightSide": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 2,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "avg(org_apache_cassandra_metrics_ClientRequest_Latency{namespace=\"$ns\", datacenter=\"$dc\", scope=\"Write\", unit=\"75thPercentile\"}) by (namespace, datacenter, scope)",
          "format": "time_series",
          "legendFormat": "{{namespace}}.{{datacenter}}.{{scope}}.Latency.p75",
          "refId": "A",
          "target": "aliasByNode(averageSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ClientRequest.Write.Latency.75percentile, 3), 2, 8, 9, 10)",
          "textEditor": false
        },
        {
          "expr": "avg(org_apache_cassandra_metrics_ClientRequest_Latency{namespace=\"$ns\", datacenter=\"$dc\", scope=\"Write\", unit=\"95thPercentile\"}) by (namespace, datacenter, scope)",
          "format": "time_series",
          "legendFormat": "{{namespace}}.{{datacenter}}.{{scope}}.Latency.p95",
          "refId": "B",
          "target": "aliasByNode(averageSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ClientRequest.Write.Latency.95percentile, 3), 2, 8, 9, 10)",
          "textEditor": false
        },
        {
          "expr": "avg(org_apache_cassandra_metrics_ClientRequest_Latency{namespace=\"$ns\", datacenter=\"$dc\", scope=\"Write\", unit=\"99thPercentile\"}) by (namespace, datacenter, scope)",
          "format": "time_series",
          "legendFormat": "{{namespace}}.{{datacenter}}.{{scope}}.Latency.p99",
          "refId": "C",
          "target": "aliasByNode(averageSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ClientRequest.Write.Latency.99percentile, 3), 2, 8, 9, 10)",
          "textEditor": false
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Write latencies (by data center)",
      "tooltip": {
        "msResolution": false,
        "shared": false,
        "sort": 2,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "µs",
          "label": "Write latency",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": "",
          "logBase": 1,
          "max": null,
          "min": null,
          "show": false
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Monitor the `p95` and `p99` latencies for anomalies to get an early indicator for potential issues.\n\n##### Required Actions\n\nIf experiencing issues with this graph, use the additional TLP graphs to detect issues with the specific request type that triggered the alert.",
      "editable": true,
      "error": false,
      "fill": 0,
      "grid": {},
      "gridPos": {
        "h": 4,
        "w": 8,
        "x": 16,
        "y": 7
      },
      "id": 3,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "rightSide": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 2,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "avg(org_apache_cassandra_metrics_ClientRequest_Latency{namespace=\"$ns\", datacenter=\"$dc\", scope!=\"Write\", scope!=\"Read\", unit=\"95thPercentile\"}) by (namespace, datacenter, scope)",
          "format": "time_series",
          "intervalFactor": 1,
          "legendFormat": "{{namespace}}.{{datacenter}}.{{host}}.{{scope}}.p95",
          "refId": "A",
          "target": "aliasByNode(averageSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ClientRequest.{CASRead,CASWrite,RangeSlice}.Latency.95percentile, 3), 2, 8, 9, 10)",
          "textEditor": false
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Other operations latencies (by data center)",
      "tooltip": {
        "msResolution": true,
        "shared": false,
        "sort": 2,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "µs",
          "label": "Operational latencies",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 22
      },
      "id": 41,
      "panels": [],
      "repeat": "dc",
      "title": "Operation Counts",
      "type": "row"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Display the number of read requests by data center.\n\n##### Values\n\nChanges in this graph should match closely with application load.",
      "editable": true,
      "error": false,
      "fill": 0,
      "grid": {},
      "gridPos": {
        "h": 4,
        "w": 8,
        "x": 0,
        "y": 23
      },
      "id": 4,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "rightSide": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 2,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "avg(org_apache_cassandra_metrics_ClientRequest_Latency{namespace=\"$ns\", datacenter=\"$dc\", scope=\"Read\", unit=\"OneMinuteRate\"}) by (namespace, datacenter, scope)",
          "format": "time_series",
          "legendFormat": "{{namespace}}.{{datacenter}}.{{scope}}.Requests.m1",
          "refId": "A",
          "target": "aliasByNode(sumSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ClientRequest.Read.Latency.1MinuteRate, 3), 2, 8)"
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Read request counts (by data center)",
      "tooltip": {
        "msResolution": true,
        "shared": false,
        "sort": 1,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "ops",
          "label": "Read counts",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Display the number of write requests by data center.\n\n##### Values\n\nChanges in this graph should match closely with application load.",
      "editable": true,
      "error": false,
      "fill": 0,
      "grid": {},
      "gridPos": {
        "h": 4,
        "w": 8,
        "x": 8,
        "y": 23
      },
      "id": 33,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "rightSide": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 2,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "avg(org_apache_cassandra_metrics_ClientRequest_Latency{namespace=\"$ns\", datacenter=\"$dc\", scope=\"Write\", unit=\"OneMinuteRate\"}) by (namespace, datacenter, scope)",
          "format": "time_series",
          "legendFormat": "{{namespace}}.{{datacenter}}.{{scope}}.Requests.m1",
          "refId": "A",
          "target": "aliasByNode(sumSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ClientRequest.Write.Latency.1MinuteRate, 3), 2, 8)"
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Write request counts (by data center)",
      "tooltip": {
        "msResolution": true,
        "shared": false,
        "sort": 1,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "ops",
          "label": "Write counts",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Display the number of other requests by data center.\n\n##### Values\n\nChanges in this graph should match closely with application load.",
      "editable": true,
      "error": false,
      "fill": 0,
      "grid": {},
      "gridPos": {
        "h": 4,
        "w": 8,
        "x": 16,
        "y": 23
      },
      "id": 34,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "rightSide": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 2,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "avg(org_apache_cassandra_metrics_ClientRequest_Latency{namespace=\"$ns\", datacenter=\"$dc\", scope!=\"Read\", scope!=\"Write\", unit=\"OneMinuteRate\"}) by (namespace, datacenter, scope)",
          "format": "time_series",
          "legendFormat": "{{namespace}}.{{datacenter}}.{{host}}.{{scope}}.m1",
          "refId": "A",
          "target": "aliasByNode(sumSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ClientRequest.{CASRead,CASWrite,RangeSlice}.Latency.1MinuteRate, 3), 2, 8)"
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Other request counts (by data center)",
      "tooltip": {
        "msResolution": true,
        "shared": false,
        "sort": 1,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "ops",
          "label": "Other counts",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 54
      },
      "id": 42,
      "panels": [],
      "repeat": "dc",
      "title": "Other Important Metrics",
      "type": "row"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Display the number of dropped messages per request type, by data center.\n\n##### Values\n\nA ideal value of `0` means that no requests have been dropped.\n\n##### Required Actions\n\nValues higher than `0` indicates an under-provisioned cluster for the specific request types. Under-provisioned clusters often times will experience the following issues that cause dropped messages:\n\n* Frequent garbage collections.\n* Prolonged garbage collection times.\n* Inefficient read patterns.\n* Back pressure.",
      "editable": true,
      "error": false,
      "fill": 0,
      "grid": {},
      "gridPos": {
        "h": 7,
        "w": 8,
        "x": 0,
        "y": 55
      },
      "id": 5,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "rightSide": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 2,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "avg(org_apache_cassandra_metrics_DroppedMessages_Dropped{namespace=\"$ns\", datacenter=\"$dc\"}) by (namespace, datacenter, message_type)",
          "format": "time_series",
          "legendFormat": "{{namespace}}.{{datacenter}}.{{message_type}}",
          "refId": "A",
          "target": "aliasByNode(sumSeriesWithWildcards(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.DroppedMessage.*.Dropped.1MinuteRate, 3), 2, 8)",
          "textEditor": false
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Dropped messages (by data center)",
      "tooltip": {
        "msResolution": false,
        "shared": false,
        "sort": 2,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "ops",
          "label": "Dropped messages",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "This graph displays the `max` size of a partition across all nodes and tables.\n\n##### Values\n\nThe max size of the row must be taken into account when calculating the amount of required heap space.\n\nWhile the maximum number of partition cells (CQL rows x CQL columns) is limited to 2 billion and a single column value is restricted to 2GB, the real-world limitation exists at around 100MB partitions.\n\nOnce partitions grow to more than 100MB:\n\n* Row caching can quickly be busted as a single row can consume all of the allocated row cache heap space.\n* Out of Memory exceptions may occur frequently as a single row may take over the majority of the heap space.\n* CPU and disk load may increase as multiple passes may be needed to load a row into memory.\n* Compactions may cause heap pressure as rows are read into memory before being written to the new SSTables.",
      "fill": 1,
      "gridPos": {
        "h": 7,
        "w": 8,
        "x": 8,
        "y": 55
      },
      "hideTimeOverride": true,
      "id": 36,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": false,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "links": [],
      "nullPointMode": "null",
      "options": {},
      "percentage": false,
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "max(org_apache_cassandra_metrics_Table_MaxRowSize{namespace=\"$ns\", datacenter=\"$dc\"})  by (namespace, datacenter, host, keyspace, table)",
          "format": "time_series",
          "hide": false,
          "intervalFactor": 1,
          "legendFormat": "",
          "refId": "A",
          "target": "aliasByNode(cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ColumnFamily.*.*.MaxRowSize.value, 2, 3, 9, 10)",
          "textEditor": false
        }
      ],
      "thresholds": [
        {
          "colorMode": "warning",
          "fill": true,
          "line": true,
          "op": "gt",
          "value": 50000000,
          "yaxis": "left"
        },
        {
          "colorMode": "critical",
          "fill": true,
          "line": true,
          "op": "gt",
          "value": 100000000,
          "yaxis": "left"
        }
      ],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": "1m",
      "title": "Max partition size (by node and table)",
      "tooltip": {
        "shared": false,
        "sort": 0,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "fill": 0,
      "gridPos": {
        "h": 7,
        "w": 8,
        "x": 16,
        "y": 55
      },
      "id": 37,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 2,
      "links": [],
      "nullPointMode": "null",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "sum(org_apache_cassandra_metrics_Table_PendingCompactions{namespace=\"$ns\", datacenter=\"$dc\"}) by (namespace, datacenter, host)",
          "format": "time_series",
          "legendFormat": "{{namespace}}.{{datacenter}}.{{host}}.PendingCompactions",
          "refId": "A",
          "target": "cassandra.$ns.$dc.$host.org.apache.cassandra.metrics.ColumnFamily.all.PendingCompactions.value"
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Pending Compactions (by host)",
      "tooltip": {
        "shared": false,
        "sort": 2,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": 0,
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 124
      },
      "id": 43,
      "panels": [],
      "repeat": null,
      "title": "System-Level Metrics",
      "type": "row"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "decimals": 0,
      "description": "Display all aspects of CPU utilization in a stacked chart to highlight where the CPU is spending the majority of its time.",
      "editable": true,
      "error": false,
      "fill": 1,
      "grid": {},
      "gridPos": {
        "h": 5,
        "w": 12,
        "x": 0,
        "y": 125
      },
      "id": 8,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "hideZero": false,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "links": [],
      "nullPointMode": "null",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "alias": "/Current/i",
          "stack": true
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "sum by (pod_name) (rate(container_cpu_usage_seconds_total{job=\"kubelet\", namespace=\"$ns\", pod_name=~\"$pod\", container_name=\"cassandra\"}[1m]))",
          "format": "time_series",
          "hide": false,
          "intervalFactor": 2,
          "legendFormat": "Current: {{ pod_name}}",
          "refId": "A",
          "target": "aliasByNode(averageSeriesWithWildcards(collectd.$ns.cassandra.$dc.$host.cpu.percent.wait, 4), 1, 4, 6)",
          "textEditor": false
        },
        {
          "expr": "sum by(container) (kube_pod_container_resource_requests{job=\"kube-state-metrics\", namespace=\"$ns\", resource=\"cpu\", pod=~\"$pod\", container=\"cassandra\"})",
          "format": "time_series",
          "intervalFactor": 2,
          "legendFormat": "Requested: {{ $dc }}",
          "refId": "B",
          "target": "aliasByNode(averageSeriesWithWildcards(collectd.$ns.cassandra.$dc.$host.cpu.percent.interrupt, 4), 1, 4, 6)",
          "textEditor": false
        },
        {
          "expr": "sum by(container) (kube_pod_container_resource_limits{job=\"kube-state-metrics\", namespace=\"$ns\", resource=\"cpu\", pod=~\"$pod\", container=\"cassandra\"})",
          "format": "time_series",
          "hide": false,
          "intervalFactor": 2,
          "legendFormat": "Limit: {{ $dc }}",
          "refId": "C",
          "target": "aliasByNode(averageSeriesWithWildcards(collectd.$ns.cassandra.$dc.$host.cpu.percent.softirq, 4), 1, 4, 6)",
          "textEditor": false
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "CPU Utilization",
      "tooltip": {
        "msResolution": true,
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "decimals": 2,
          "format": "short",
          "label": "CPU utilization",
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "decimals": null,
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "This chart displays:\n\n* Aggregated data center's CPU short term load.\n* Individual node's CPU short term load.\n\n##### Values\n\nIf CPU load is generally high:\n\n* Consider increasing the number of nodes.\n\nIf horizontally scaling the cluster is not an option, consider:\n\n* Lowering encryption requirements.\n* Choose a more powerful CPU per node.\n\n##### Required Actions\n\nIf CPU load is spiking, monitor the number of concurrent compactions.\n\nPossible issues that may cause a spike in CPU load include:\n\n* Garbage collection issues.\n* Non-optimal compaction strategy.\n    * Too many SSTables per read.\n    * Frequent partition updates.\n* Ultra-wide partitions.\n* Client-based connection issues.\n* Secondary Indexes.\n* High frequency page cache-backed reads.\n* CPU interrupt issues.",
      "editable": true,
      "error": false,
      "fill": 0,
      "grid": {},
      "gridPos": {
        "h": 5,
        "w": 12,
        "x": 12,
        "y": 125
      },
      "id": 13,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "rightSide": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 2,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "alias": "datacenter",
          "fill": 1,
          "stack": false
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "java_lang_OperatingSystem_SystemCpuLoad{namespace=\"$ns\", datacenter=~\"$dc\", pod=~\"$host\"}",
          "format": "time_series",
          "hide": false,
          "intervalFactor": 1,
          "legendFormat": "{{pod}}",
          "refId": "A",
          "target": "aliasByNode(averageSeriesWithWildcards(averageSeriesWithWildcards(collectd.$ns.cassandra.$dc.$host.load.load.shortterm, 2), 3), 2, 4, 5)"
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Java: CPU Load",
      "tooltip": {
        "msResolution": false,
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "percentunit",
          "label": "Short term CPU load",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "datasource": "$datasource",
      "description": "Display the percentage of `used` disk space:\n\n* Per node.\n* Per monitored directory, as set in `collectd.conf` on the Cassandra nodes.\n\nFree disk space is critical for normal Cassandra operations in order to allow for the compaction of two or more SSTables into a single SSTable.\n\nIn order for this process to occur, there needs to be enough disk space to write out a file no larger than the combined size of all SSTables being compacted. Once the new SSTable is written to disk, the deprecated SSTables will be removed and free disk space should return to a level seen before the compaction was initiated, or lower if mutations were removed from disk during the compaction process.\n\n##### Values\n\nIf a node's data directory is utilizing 65% of the disk's capacity, begin the procurement process to add more nodes to the data center.\n\n##### Required Actions\n\nIf a node's data directory is utilizing 80% of the disk's capacity, bootstrapping a new node should already be underway.",
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 130
      },
      "hideTimeOverride": true,
      "id": 35,
      "links": [],
      "options": {
        "displayMode": "lcd",
        "fieldOptions": {
          "calcs": [
            "last"
          ],
          "defaults": {
            "decimals": 2,
            "max": 100,
            "min": 0,
            "unit": "percent"
          },
          "mappings": [],
          "override": {},
          "thresholds": [
            {
              "color": "green",
              "index": 0,
              "value": null
            },
            {
              "color": "red",
              "index": 1,
              "value": 80
            }
          ],
          "values": false
        },
        "orientation": "vertical"
      },
      "targets": [
        {
          "expr": "kubelet_volume_stats_capacity_bytes{namespace=\"$ns\", persistentvolumeclaim=~\"data-([[host]])\"}",
          "format": "time_series",
          "hide": true,
          "instant": false,
          "interval": "",
          "intervalFactor": 1,
          "legendFormat": "",
          "refId": "B"
        },
        {
          "expr": "kubelet_volume_stats_used_bytes{namespace=\"$ns\", persistentvolumeclaim=~\"data-([[host]])\"} ",
          "format": "time_series",
          "hide": true,
          "instant": false,
          "intervalFactor": 1,
          "legendFormat": "{{persistentvolumeclaim}}",
          "refId": "C"
        },
        {
          "expr": "(kubelet_volume_stats_used_bytes{namespace=\"$ns\", persistentvolumeclaim=~\"data-([[host]])\"} / kubelet_volume_stats_capacity_bytes{namespace=\"$ns\", persistentvolumeclaim=~\"data-([[host]])\"}) * 100",
          "format": "time_series",
          "hide": false,
          "instant": false,
          "intervalFactor": 1,
          "legendFormat": "{{persistentvolumeclaim}}",
          "refId": "A",
          "target": "aliasByNode(sumSeriesWithWildcards(collectd.$ns.cassandra.$dc.$host.df.*.percent_bytes.{reserved,used}, 8), 3, 4, 6)"
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "Current disk space used (by disk)",
      "transparent": true,
      "type": "bargauge"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "decimals": 2,
      "description": "Display the percentage of `used` and `reserved` disk space:\n\n* Per node.\n* Per monitored directory, as set in `collectd.conf` on the Cassandra nodes.\n\nFree disk space is critical for normal Cassandra operations in order to allow for the compaction of two or more SSTables into a single SSTable.\n\nIn order for this process to occur, there needs to be enough disk space to write out a file no larger than the combined size of all SSTables being compacted. Once the new SSTable is written to disk, the deprecated SSTables will be removed and free disk space should return to a level seen before the compaction was initiated, or lower if mutations were removed from disk during the compaction process.\n\n##### Values\n\nIf a node's data directory is utilizing 65% of the disk's capacity, begin the procurement process to add more nodes to the data center.\n\n##### Required Actions\n\nIf a node's data directory is utilizing 80% of the disk's capacity, bootstrapping a new node should already be underway.",
      "fill": 0,
      "gridPos": {
        "h": 5,
        "w": 12,
        "x": 12,
        "y": 130
      },
      "id": 21,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "hideEmpty": false,
        "hideZero": false,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sideWidth": null,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "links": [],
      "nullPointMode": "null",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "alias": "/capacity*/",
          "hideTooltip": true,
          "legend": false
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "kubelet_volume_stats_used_bytes{namespace=\"$ns\", persistentvolumeclaim=~\"data-([[host]])\"}",
          "format": "time_series",
          "intervalFactor": 1,
          "legendFormat": "usage.{{persistentvolumeclaim}}",
          "refId": "A",
          "target": "aliasByNode(sumSeriesWithWildcards(collectd.$ns.cassandra.$dc.$host.df.*.percent_bytes.{reserved,used}, 8), 3, 4, 6)",
          "instant": false
        },
        {
          "refId": "B",
          "expr": "kubelet_volume_stats_capacity_bytes{namespace=\"$ns\", persistentvolumeclaim=~\"data-([[host]])\"}",
          "intervalFactor": 1,
          "format": "time_series",
          "legendFormat": "capacity.{{persistentvolumeclaim}}",
          "hide": false,
          "instant": false
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Disk Space Used",
      "tooltip": {
        "shared": true,
        "sort": 1,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "decimals": null,
          "format": "percent",
          "label": "Disk utilization",
          "logBase": 1,
          "max": "null",
          "min": "null",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Monitor the network throughput of TX and RX packets.\n\nReceived throughput is displayed as a negative number (downloaded).\n\nTransferred throughput is displayed as a positive number (uploaded).",
      "editable": true,
      "error": false,
      "fill": 0,
      "grid": {},
      "gridPos": {
        "h": 5,
        "w": 12,
        "x": 0,
        "y": 139
      },
      "id": 12,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "max": true,
        "min": true,
        "rightSide": true,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 3,
      "links": [],
      "nullPointMode": "null",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "alias": "/-.+\\.tx/i",
          "fill": 10,
          "stack": "A"
        },
        {
          "alias": "/-.+\\.rx/i",
          "fill": 10,
          "stack": "C"
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "0 - sort_desc(sum by (pod_name) (rate(container_network_receive_bytes_total{job=\"kubelet\", namespace=\"$ns\", pod_name=~\"$pod\"}[1m])))",
          "format": "time_series",
          "hide": false,
          "intervalFactor": 2,
          "legendFormat": "{{pod_name}}.rx",
          "refId": "A",
          "target": "aliasByNode(scale(sumSeriesWithWildcards(sumSeriesWithWildcards(derivative(collectd.$ns.cassandra.$dc.$host.interface.eth0.if_octets.rx), 2), 3), -1), 2, 6)",
          "textEditor": false
        },
        {
          "expr": "0 - sort_desc(sum by (datacenter) (rate(container_network_receive_bytes_total{job=\"kubelet\", namespace=\"$ns\", pod_name=~\"$pod\"}[1m])))",
          "format": "time_series",
          "hide": false,
          "intervalFactor": 2,
          "legendFormat": "{{$dc}}.rx",
          "refId": "B",
          "target": "aliasByNode(scale(sumSeriesWithWildcards(sumSeriesWithWildcards(derivative(collectd.$ns.cassandra.$dc.$host.interface.eth0.if_octets.rx), 2), 3), -1), 2, 6)",
          "textEditor": false
        },
        {
          "expr": "sort_desc(sum by (pod_name) (rate(container_network_transmit_bytes_total{job=\"kubelet\", namespace=\"$ns\", pod_name=~\"$pod\"}[1m])))",
          "format": "time_series",
          "hide": false,
          "intervalFactor": 2,
          "legendFormat": "{{pod_name}}.tx",
          "refId": "C",
          "target": "aliasByNode(scale(sumSeriesWithWildcards(sumSeriesWithWildcards(derivative(collectd.$ns.cassandra.$dc.$host.interface.eth0.if_octets.rx), 2), 3), -1), 2, 6)",
          "textEditor": false
        },
        {
          "expr": "sort_desc(sum by (datacenter) (rate(container_network_transmit_bytes_total{job=\"kubelet\", namespace=\"$ns\", pod_name=~\"$pod\"}[1m])))",
          "format": "time_series",
          "hide": false,
          "intervalFactor": 2,
          "legendFormat": "{{$dc}}.tx",
          "refId": "D",
          "target": "aliasByNode(scale(sumSeriesWithWildcards(sumSeriesWithWildcards(derivative(collectd.$ns.cassandra.$dc.$host.interface.eth0.if_octets.rx), 2), 3), -1), 2, 6)",
          "textEditor": false
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Network Throughput (by data center)",
      "tooltip": {
        "msResolution": true,
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "Bps",
          "label": "Network Throughput",
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": true,
        "alignLevel": 5
      }
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 144
      },
      "id": 44,
      "panels": [],
      "repeat": null,
      "title": "JVM G1 GC Stats",
      "type": "row"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Display the amount of time spent with G1 young generation garbage collection times.\n\nThis chart will remain empty if ParNew CMS garbage collection is being used. Ensure that either G1 **or** ParNew CMS is being used homogeneously within a data center for more predictable performance.\n\nTODO: @Alex?",
      "editable": true,
      "error": false,
      "fill": 1,
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 0,
        "y": 145
      },
      "id": 16,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "rate(jvm_gc_collection_seconds_sum{gc=\"G1 Young Generation\",datacenter=\"$dc\"}[5m]) / rate(jvm_gc_collection_seconds_count{gc=\"G1 Young Generation\",datacenter=\"$dc\"}[5m])",
          "format": "time_series",
          "legendFormat": "{{pod}}",
          "refId": "A",
          "target": "derivative(cassandra.$ns.$dc.$host.jvm.gc.G1-Young-Generation.time)"
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "JVM G1 Young Generation",
      "tooltip": {
        "msResolution": false,
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "ms",
          "label": "Garbage collection times",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "Display the amount of time spent with G1 old generation garbage collection times.\n\nThis chart will remain empty if ParNew CMS garbage collection is being used. Ensure that either G1 **or** ParNew CMS is being used homogeneously within a data center for more predictable performance.\n\nTODO: @Alex?",
      "editable": true,
      "error": false,
      "fill": 1,
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 12,
        "y": 145
      },
      "id": 17,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "rate(jvm_gc_collection_seconds_sum{gc=\"G1 Old Generation\",datacenter=\"$dc\"}[5m]) / rate(jvm_gc_collection_seconds_count{gc=\"G1 Old Generation\",datacenter=\"$dc\"}[5m])",
          "legendFormat": "{{pod}}",
          "refId": "A",
          "target": "derivative(cassandra.$ns.$dc.$host.jvm.gc.G1-Old-Generation.time)"
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "JVM G1 Old Generation",
      "tooltip": {
        "msResolution": false,
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "ms",
          "label": "Garbage collection times",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 152
      },
      "id": 45,
      "panels": [],
      "repeat": null,
      "title": "JVM ParNew CMS GC Stats",
      "type": "row"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "$datasource",
      "description": "@Alex/@Alain, why `.runs`, instead `.time`?",
      "editable": true,
      "error": false,
      "fill": 1,
      "gridPos": {
        "h": 7,
        "w": 24,
        "x": 0,
        "y": 153
      },
      "id": 18,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": true,
        "min": false,
        "show": false,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "links": [],
      "nullPointMode": "connected",
      "options": {},
      "percentage": false,
      "pointradius": 5,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "expr": "deriv(jvm_gc_ParNew{namespace=\"$ns\", datacenter=\"$dc\", unit=\"CollectionTime\"}[1m])",
          "format": "time_series",
          "legendFormat": "{{namespace}}.{{datacenter}}.{{host}}.ParNew.{{unit}}",
          "refId": "A",
          "target": "derivative(cassandra.$ns.$dc.$host.jvm.gc.ParNew.runs)"
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "JVM ParNew runs",
      "tooltip": {
        "msResolution": false,
        "shared": false,
        "sort": 2,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "ms",
          "label": "Garbage collection times",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": true
        },
        {
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    }
  ],
  "refresh": "30s",
  "schemaVersion": 18,
  "style": "dark",
  "tags": [
    "tlp",
    "cassandra"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "default",
          "value": "default"
        },
        "hide": 0,
        "includeAll": false,
        "label": null,
        "multi": false,
        "name": "datasource",
        "options": [],
        "query": "prometheus",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "type": "datasource"
      },
      {
        "allValue": null,
        "current": {},
        "datasource": "$datasource",
        "definition": "label_values(org_apache_cassandra_metrics_Storage_Load, namespace)",
        "hide": 0,
        "includeAll": false,
        "label": "Namespace",
        "multi": false,
        "name": "ns",
        "options": [],
        "query": "label_values(org_apache_cassandra_metrics_Storage_Load, namespace)",
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "allValue": null,
        "current": {},
        "datasource": "$datasource",
        "definition": "label_values(org_apache_cassandra_metrics_Storage_Load,app_kubernetes_io_name)",
        "hide": 0,
        "includeAll": false,
        "label": null,
        "multi": false,
        "name": "instance",
        "options": [],
        "query": "label_values(org_apache_cassandra_metrics_Storage_Load,app_kubernetes_io_name)",
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tags": [],
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "allValue": "",
        "current": {},
        "datasource": "$datasource",
        "definition": "label_values(org_apache_cassandra_metrics_Storage_Load{app_kubernetes_io_name=\"$instance\"}, datacenter)",
        "hide": 0,
        "includeAll": false,
        "label": "Data Center",
        "multi": false,
        "name": "dc",
        "options": [],
        "query": "label_values(org_apache_cassandra_metrics_Storage_Load{app_kubernetes_io_name=\"$instance\"}, datacenter)",
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": null,
        "tags": [],
        "tagsQuery": null,
        "type": "query",
        "useTags": false
      },
      {
        "allValue": null,
        "current": {},
        "datasource": "$datasource",
        "definition": "label_values(org_apache_cassandra_metrics_Storage_Load{datacenter=~\"$dc\", app_kubernetes_io_name=\"$instance\"}, host)",
        "hide": 2,
        "includeAll": true,
        "label": "",
        "multi": false,
        "name": "host",
        "options": [],
        "query": "label_values(org_apache_cassandra_metrics_Storage_Load{datacenter=~\"$dc\", app_kubernetes_io_name=\"$instance\"}, host)",
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": null,
        "tags": [],
        "tagsQuery": null,
        "type": "query",
        "useTags": false
      },
      {
        "allValue": null,
        "current": {},
        "datasource": "$datasource",
        "definition": "label_values(org_apache_cassandra_metrics_Storage_Load{datacenter=~\"$dc\", app_kubernetes_io_name=\"$instance\"}, host)",
        "hide": 0,
        "includeAll": true,
        "label": "Host",
        "multi": false,
        "name": "pod",
        "options": [],
        "query": "label_values(org_apache_cassandra_metrics_Storage_Load{datacenter=~\"$dc\", app_kubernetes_io_name=\"$instance\"}, host)",
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "tagValuesQuery": null,
        "tags": [],
        "tagsQuery": null,
        "type": "query",
        "useTags": false
      }
    ]
  },
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "5s",
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ],
    "time_options": [
      "5m",
      "15m",
      "1h",
      "6h",
      "12h",
      "24h",
      "2d",
      "7d",
      "30d"
    ]
  },
  "timezone": "browser",
  "title": "Cassandra - Overview",
  "version": null
}
